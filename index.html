<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nergal's Portfolio</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css"/>
  <link rel="icon" href="Images/FaviconBlackandRed.webp" type="image/webp">

  <!-- SEO Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Nergal Prescod",
    "url": "https://nergalprescod.com",
    "logo": "https://nergalprescod.com/Images/FaviconBlackandRed.webp"
  }
  </script>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EE2YXDH9N8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-EE2YXDH9N8');
  </script>
</head>

<body class="portfolio-page">
  <!-- custom cursor canvas -->
  <canvas id="cursorCanvas"></canvas>

  <!-- Header / Nav -->
  <header>
    <div class="container">
      <h1 class="logo">
        <a href="index.html" class="logo-link">Nergal's Portfolio</a>
      </h1>

      <div class="menu-toggle" id="menu-toggle">&#9776;</div>
      <nav>
        <ul class="nav-links">
          <li><a href="#photoshop">Photoshop</a></li>
          <li><a href="#indesign">InDesign</a></li>
          <li><a href="#illustrator">Illustrator</a></li>
          <li><a href="aboutMe.html">About Me</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero">
      <div id="js-stars"></div>
      <h2>Welcome to My Portfolio</h2>
      <p>Explore my creative and technical projects below.</p>
    </section>

    <!-- Photoshop -->
    <section id="photoshop" class="portfolio-gallery">
      <h2>Photoshop Projects</h2>

      <figure
        data-title="The Hero's Journey"
        data-description="I created this piece for my MMA 100 project called 'Transported,' where we had to teleport ourselves into a fantasy world. The bull, bird, and snake each represent parts of me at that moment — the bull for groundedness and stability, the bird for freedom and seeing the bigger picture, and the snake for wisdom and instincts. I designed it to be open to interpretation so each viewer can find their own meaning. This piece would translate beautifully into a book cover, film poster, or limited-edition print — a striking centerpiece for anyone drawn to myth, symbolism, and transformation.">
        <img src="Images/MMA100Fall24Proj2_NergalPrescodREVISED.webp" alt="The Hero's Journey">
        <figcaption>The Hero's Journey</figcaption>
      </figure>

      <figure
        data-title="Who started the fire?"
        data-description="A fun project for my MMP 100 class at BMCC inspired by a 'blimp of chaos'—playing with the tension between destruction and calm. This would make a bold poster, album cover, or editorial spread.">
        <img src="Images/creation2.webp" alt="Who started the fire?" />
        <figcaption>Who started the fire?</figcaption>
      </figure>

      <figure
        data-title="Saturn Welcomes You"
        data-description="Surreal travel poster energy—cosmic invitation vibes. Strong as a poster/print or cover art.">
        <img src="Images/Saturn-Welcomes you pt2.png" alt="Saturn Welcomes You" />
        <figcaption>Saturn Welcomes You</figcaption>
      </figure>

      <figure
        data-title="Dive"
        data-description="Motion, atmosphere, and wonder. Designed with negative space to work nicely as cover art.">
        <img src="Images/creation3.webp" alt="Dive" />
        <figcaption>Dive</figcaption>
      </figure>
    </section>

    <!-- InDesign -->
    <section id="indesign" class="portfolio-gallery">
      <h2>InDesign Projects</h2>
      <figure data-title="Magazine Cover" data-description="Editorial cover concept exploring hierarchy and contrast.">
        <img src="Images/Mag-Cover.png" alt="Magazine Cover" />
        <figcaption>Magazine Cover</figcaption>
      </figure>
      <figure data-title="Magazine Inside" data-description="Interior spread layout—grid, rhythm, and type pairing.">
        <img src="Images/Mag-Inside.png" alt="Magazine Inside"  />
        <figcaption>Magazine Inside</figcaption>
      </figure>
    </section>

    <!-- Illustrator -->
    <section id="illustrator" class="portfolio-gallery">
      <h2>Illustrator Projects</h2>
      <figure data-title="The birth of shadows" data-description="Stylized vector illustration—mythic and minimal.">
        <img src="Images/SUNVOIDMOON.webp" alt="The birth of shadows"  />
        <figcaption>The birth of shadows</figcaption>
      </figure>
    </section>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
      <span class="close" onclick="closeLightbox()">&times;</span>
      <img id="lightbox-img" src="" alt="Project Preview" />
      <p id="lightbox-description" style="margin-top:10px; font-size:1rem; max-width:80%; text-align:center;"></p>
    </div>
  </main>

  <!-- Cloud transition + audio -->
  <div id="cloud-transition"></div>
  <audio id="cloud-sound" src="sounds/cloud-whoosh.mp3.wav" preload="auto"></audio>

  <!-- ========== SCRIPTS (single, cleaned) ========== -->

  <!-- Stars -->
  <script>
    function createStarField() {
      const starsContainer = document.getElementById("js-stars");
      if (!starsContainer) return;
      for (let i = 0; i < 125; i++) {
        const star = document.createElement("div");
        star.classList.add("star");
        star.style.top = `${Math.random() * 100}%`;
        star.style.left = `${Math.random() * 100}%`;
        star.style.animationDuration = `${2 + Math.random() * 3}s`;
        starsContainer.appendChild(star);
      }
    }
    window.addEventListener("DOMContentLoaded", createStarField);
  </script>

  <!-- Cloud transition -->
  <script>
    function triggerCloudTransition(cloudCount = 50, callback = null) {
      const container = document.getElementById('cloud-transition');
      container.innerHTML = '<div class="cloud-fade-bg"></div>';
      container.style.display = 'block';
      container.style.opacity = '1';
      document.getElementById('cloud-sound').play().catch(() => {});
      for (let i = 0; i < cloudCount; i++) {
        const cloud = document.createElement('img');
        cloud.src = 'Images/cloud-1.png';
        cloud.classList.add('cloud');
        cloud.style.top = `${Math.random() * 70 + 10}%`;
        cloud.style.animationDelay = `${Math.random() * 5}s`;
        container.appendChild(cloud);
      }
      setTimeout(() => {
        container.style.opacity = '0';
        setTimeout(() => {
          container.style.display = 'none';
          container.style.opacity = '1';
          if (callback) callback();
        }, 1000);
      }, 5000);
    }

    // Transition on external links (not anchors/mailto)
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('a').forEach(link => {
        const href = link.getAttribute('href');
        if (href && !href.startsWith('#') && !href.startsWith('mailto')) {
          link.addEventListener('click', e => {
            e.preventDefault();
            triggerCloudTransition(50, () => {
              window.location.href = href;
            });
          });
        }
      });
    });
  </script>

  <!-- Lightbox (single instance) -->
  <script>
    // Preload gallery images to avoid first-click lag
    document.querySelectorAll('.portfolio-gallery img').forEach(img => {
      const preload = new Image();
      preload.src = img.src;
    });

    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxDesc = document.getElementById('lightbox-description');

    // Open
    document.querySelectorAll('.portfolio-gallery img').forEach(item => {
      item.addEventListener('click', () => {
        lightboxImg.src = item.src;

        const parentFigure = item.closest('figure');
        if (parentFigure?.dataset.description) {
          lightboxDesc.textContent = parentFigure.dataset.description;
          lightboxDesc.style.display = 'block';
        } else {
          lightboxDesc.textContent = '';
          lightboxDesc.style.display = 'none';
        }

        lightbox.style.display = 'flex';
      });
    });

    // Close on backdrop or image click
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox || e.target === lightboxImg) {
        lightbox.style.display = 'none';
      }
    });

    // Close button
    function closeLightbox() {
      lightbox.style.display = 'none';
    }

    // Keyboard UX (ESC to close)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeLightbox();
    });
  </script>

  <!-- Reveal on scroll -->
  <script>
    const figures = document.querySelectorAll(".portfolio-gallery figure");
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add("visible");
      });
    }, { threshold: 0.2 });
    figures.forEach(fig => observer.observe(fig));
  </script>

  <!-- Mobile menu -->
  <script>
    const menuToggle = document.getElementById('menu-toggle');
    const navLinks = document.querySelector('.nav-links');

    menuToggle.addEventListener('click', (e) => {
      e.stopPropagation();
      navLinks.classList.toggle('active');
    });

    document.querySelectorAll('.nav-links a').forEach(link => {
      link.addEventListener('click', () => navLinks.classList.remove('active'));
    });

    document.addEventListener('click', (e) => {
      if (!navLinks.contains(e.target) && !menuToggle.contains(e.target)) {
        navLinks.classList.remove('active');
      }
    });
  </script>

  <!-- Cursor effect (optimized) -->
  <script>
    const canvas = document.getElementById('cursorCanvas');
    const ctx = canvas.getContext('2d', { alpha: true });
    let dpr = Math.min(window.devicePixelRatio || 1, 1.5);

    function resize() {
      canvas.width  = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      canvas.style.width  = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    resize();
    window.addEventListener('resize', resize);

    let mouse = { x: window.innerWidth/2, y: window.innerHeight/2 };
    let moving = false;
    let lastMove = 0;

    document.addEventListener('mousemove', (e) => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
      moving = true;
      lastMove = performance.now();
    });

    let lastFrame = 0;
    const FRAME_MS = 1000/30; // ~30fps
    const LINES_PER_TICK = 3;

    function drawTick(now) {
      if (now - lastFrame < FRAME_MS) {
        requestAnimationFrame(drawTick);
        return;
      }
      lastFrame = now;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      if (!moving && (now - lastMove) > 1000) {
        requestAnimationFrame(drawTick);
        return;
      }
      moving = false;

      for (let i = 0; i < LINES_PER_TICK; i++) {
        const offsetX = (Math.random() * 40 - 20);
        const offsetY = (Math.random() * 40 - 20);
        const endX = mouse.x + (Math.random() * 40 - 20);
        const endY = mouse.y + (Math.random() * 40 - 20);

        ctx.beginPath();
        ctx.moveTo(mouse.x + offsetX, mouse.y + offsetY);
        ctx.lineTo(endX, endY);
        ctx.lineWidth = 0.8 + Math.random() * 0.8;
        ctx.shadowBlur = 4;
        ctx.shadowColor = '#ff0000';
        ctx.strokeStyle = `rgba(255,0,0,${0.3 + Math.random() * 0.3})`;
        ctx.stroke();
      }

      requestAnimationFrame(drawTick);
    }
    requestAnimationFrame(drawTick);

    // Disable on small screens
    if (window.matchMedia('(max-width: 600px)').matches) {
      canvas.remove();
    }
  </script>
</body>
</html>
